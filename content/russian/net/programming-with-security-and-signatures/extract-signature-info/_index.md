---
title: Извлечь информацию о подписи
linktitle: Извлечь информацию о подписи
second_title: Справочник по API Aspose.PDF для .NET
description: Узнайте, как извлекать цифровые подписи и информацию о сертификатах из документов PDF с помощью Aspose.PDF для .NET. Полное пошаговое руководство для разработчиков C#.
type: docs
weight: 80
url: /ru/net/programming-with-security-and-signatures/extract-signature-info/
---
## Введение

В современном цифровом мире обеспечение безопасности и целостности документов имеет решающее значение. Одним из распространенных методов защиты PDF-файлов является добавление цифровой подписи. Однако извлечение и проверка данных подписи иногда может быть сложной задачей, особенно когда вы имеете дело с различными сертификатами. В этом руководстве мы проведем вас через процесс извлечения информации о подписи из документов PDF с помощью Aspose.PDF для .NET, что значительно упростит задачу. Вы узнаете, как получить доступ к полям подписи, извлечь информацию о сертификате и сохранить ее в файле.

## Предпосылки

Прежде чем начать, давайте убедимся, что у вас все готово.

-  Библиотека Aspose.PDF для .NET: если у вас ее еще нет, вы можете загрузить ее с сайта[Страница загрузки Aspose.PDF для .NET](https://releases.aspose.com/pdf/net/). 
- Среда разработки .NET: вам понадобится IDE, например Visual Studio.
- Базовые знания C#: знакомство с C# полезно для понимания фрагментов кода в этом руководстве.
- PDF-документ с цифровой подписью: в целях тестирования убедитесь, что у вас есть PDF-файл, содержащий хотя бы одну цифровую подпись.

## Импорт требуемых пространств имен

Прежде чем перейти к коду, важно импортировать необходимые пространства имен. Эти пространства имен позволят вам получить доступ к функционалу Aspose.PDF и работать с документами PDF.

```csharp
using System.IO;
using Aspose.Pdf.Forms;
using Aspose.Pdf;
using System;
```

Теперь, когда вы настроили все необходимое, давайте перейдем к непосредственному процессу извлечения информации о подписи из PDF-файла.

## Шаг 1: Настройка каталога документов

 Перед началом работы с PDF-документом вам необходимо указать местоположение файла, который вы будете использовать. Вы можете заменить`"YOUR DOCUMENT DIRECTORY"` на фактический путь к каталогу, где хранятся ваши PDF-файлы.

```csharp
// Путь к каталогу документов.
string dataDir = "YOUR DOCUMENT DIRECTORY";
string input = dataDir + "ExtractSignatureInfo.pdf";
```

Здесь мы указываем каталог, содержащий PDF-файл, и само имя файла. Убедитесь, что файл существует в этом каталоге!

## Шаг 2: Загрузка PDF-документа

 Теперь, когда вы настроили свой каталог, следующим шагом будет загрузка PDF-документа с помощью`Document` класс из Aspose.PDF.

```csharp
using (Document pdfDocument = new Document(input))
{
    // Обработать PDF-файл можно здесь.
}
```

 Эта строка кода инициализирует`Document`объект, представляющий файл PDF.`using` оператор гарантирует очистку ресурсов после обработки документа.

## Шаг 3: Доступ к полям формы

На этом шаге мы пройдемся по всем полям формы в документе PDF. Поскольку подписи обычно хранятся в виде полей формы, этот шаг поможет нам идентифицировать поля подписи.

```csharp
foreach (Field field in pdfDocument.Form)
{
    // Определите поля подписи здесь.
}
```

 Итерируя через`Form` собственность`Document` объект, мы можем проверить каждое поле формы, чтобы проверить, является ли оно полем подписи.

## Шаг 4: Определение полей подписи

 После того, как вы получили доступ к полям формы, следующим шагом будет определение того, какие из них являются полями подписи. Мы можем сделать это, приведя каждое поле к`SignatureField` объект.

```csharp
SignatureField sf = field as SignatureField;
if (sf != null)
{
    // Извлечь информацию о подписи.
}
```

 Здесь мы используем`as` ключевое слово, чтобы попытаться преобразовать каждое поле формы в`SignatureField`. Если приведение прошло успешно, мы знаем, что поле является подписью.

## Шаг 5: Извлечение сертификата

Теперь, когда вы определили поле подписи, следующая задача — извлечь сертификат из подписи. Сертификаты содержат важную информацию о подписавшемся и действительности подписи.

```csharp
Stream cerStream = sf.ExtractCertificate();
```

 The`ExtractCertificate` Метод возвращает`Stream` объект, содержащий данные сертификата. Этот поток может использоваться для сохранения сертификата для дальнейшего анализа или хранения.

## Шаг 6: Сохранение сертификата в файле

 После того, как вы извлекли сертификат, последний шаг — сохранить его в файл. В этом случае мы сохраним сертификат как`.cer` файл.

```csharp
if (cerStream != null)
{
    using (cerStream)
    {
        byte[] bytes = new byte[cerStream.Length];
        using (FileStream fs = new FileStream(dataDir + @"input.cer", FileMode.CreateNew))
        {
            cerStream.Read(bytes, 0, bytes.Length);
            fs.Write(bytes, 0, bytes.Length);
        }
    }
}
```

В этом блоке кода мы:

1. Проверьте, не является ли поток сертификатов нулевым.
2. Считать данные сертификата в массив байтов.
3.  Записать массив байтов в`.cer` файл в каталоге документов.

## Заключение

Извлечение цифровых подписей и связанной с ними информации о сертификатах из документов PDF с помощью Aspose.PDF для .NET довольно просто, если разбить процесс на простые шаги. Независимо от того, проводите ли вы аудит документов, проверяете подписи или просто сохраняете сертификаты для сохранности, это руководство снабдит вас знаниями, которые позволят вам сделать это эффективно. Помните, что защита и проверка документов имеют решающее значение в современном цифровом мире, и использование таких инструментов, как Aspose.PDF для .NET, значительно упрощает эту задачу.

## Часто задаваемые вопросы

### Можно ли извлечь несколько подписей из PDF-файла с помощью Aspose.PDF для .NET?
Да, код проходит по всем полям формы в документе, позволяя извлечь несколько подписей, если они существуют.

### Что произойдет, если в PDF-файле не будет найдена подпись?
Если поля подписи отсутствуют, код просто пропустит их, не выдавая ошибку.

### Могу ли я использовать этот подход для проверки действительности подписи?
Хотя вы можете извлечь сертификат, проверка действительности подписи требует дополнительных шагов, таких как проверка цепочки доверия сертификата.

### Можно ли извлечь другие данные полей формы с помощью Aspose.PDF для .NET?
Да, Aspose.PDF позволяет вам получать доступ и управлять различными типами полей форм в PDF-файле, а не только полями подписи.

### Как я могу просмотреть сведения об извлеченном сертификате?
 После сохранения сертификата как`.cer` файл, вы можете открыть его с помощью любого средства просмотра сертификатов или импортировать его в системное хранилище сертификатов для дальнейшей проверки.